<?xml version="1.0" encoding="utf-8" ?>
<Patch>

  <!-- ========== Patch defend range ========== -->

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/DutyDef[defName="Defend"]/thinkNode/subNodes/li[@Class="JobGiver_AIDefendPoint"]/targetAcquireRadius</xpath>
		<value>
			<targetAcquireRadius>86</targetAcquireRadius>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/DutyDef[defName="Defend"]/thinkNode/subNodes/li[@Class="JobGiver_AIDefendPoint"]/targetKeepRadius</xpath>
		<value>
			<targetKeepRadius>93</targetKeepRadius>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/DutyDef[defName="Defend"]/thinkNode/subNodes/li[@Class="ThinkNode_ForbidOutsideFlagRadius"]/maxDistToSquadFlag</xpath>
		<value>
			<maxDistToSquadFlag>32</maxDistToSquadFlag>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/DutyDef[defName="Defend"]/thinkNode/subNodes/li[@Class="JobGiver_WanderNearDutyLocation"]/wanderRadius</xpath>
		<value>
			<wanderRadius>12</wanderRadius>
		</value>
	</Operation>

  	<!-- ========== Patch siege duties ========== -->

	<Operation Class="PatchOperationAttributeSet">
		<xpath>Defs/DutyDef/thinkNode/subNodes/li[@Class="JobGiver_ManTurretsNearSelf"]</xpath>
		<attribute>Class</attribute>
		<value>CombatExtended.JobGiver_ManTurretsNearSelfCE</value>
	</Operation>

	<Operation Class="PatchOperationAttributeSet">
		<xpath>Defs/DutyDef/thinkNode/subNodes/li[@Class="JobGiver_ManTurretsNearPoint"]</xpath>
		<attribute>Class</attribute>
		<value>CombatExtended.JobGiver_ManTurretsNearPointCE</value>
	</Operation>

	<!-- ========== Patch Trashing jobs ========== -->

	<Operation Class="CombatExtended.PatchOperationWrap">
		<xpath>Defs/DutyDef[defName="PrisonerAssaultColony" or defName="AssaultColony" or defName="Breaching"]/thinkNode/subNodes</xpath>
		<nodes>
			<li>li[@Class="JobGiver_AITrashColonyClose"]</li>
			<li>li[@Class="JobGiver_AITrashBuildingsDistant"]</li>			
		</nodes>
		<with>
			<li Class="CombatExtended.AI.ThinkNode_ConditionalCombatPosition">				
				<subNodes>
					<li Class="JobGiver_SelfTend" />
					<fi_1 /> <!-- will place the first node here  -->
					<fi_2 /> <!-- will place the second node here -->					
				</subNodes>
			</li>
		</with>
	</Operation>	

	<Operation Class="CombatExtended.PatchOperationWrap">
		<xpath>Defs/DutyDef[defName="AssaultColony"]/thinkNode/subNodes</xpath>
		<nodes>
			<li>li[@Class="JobGiver_AITrashBuildingsDistant"]</li>					
		</nodes>
		<with>
			<li Class="CombatExtended.AI.ThinkNode_ConditionalCombatPosition">
				<visibileEnemies>
					<min>0</min>
					<max>1</max>
				</visibileEnemies>
				<subNodes>
					<fi_1 /> <!-- will place the first node here  -->					
				</subNodes>
			</li>
		</with>
	</Operation>
</Patch>
